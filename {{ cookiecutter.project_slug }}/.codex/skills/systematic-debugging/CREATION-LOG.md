# 作成ログ: システマティック・デバッグ・スキル

重要スキルを抽出し、構造化し、堅牢化する際の参考例。

## ソース資料

`/Users/jesse/.claude/CLAUDE.md` からデバッグフレームワークを抽出:
- 4フェーズの体系的プロセス（調査 → パターン分析 → 仮説 → 実装）
- 中核命令: 常に根本原因を見つけ、症状修正はしない
- 時間的圧力や自己正当化に耐えるためのルール

## 抽出の判断

**入れるもの:**
- 4フェーズ全体とすべてのルール
- 近道禁止（「症状修正禁止」「STOPして再分析」）
- プレッシャー耐性のある文言（「早くても」「急いで見えても」）
- 各フェーズの具体的手順

**外すもの:**
- プロジェクト固有の文脈
- 同じルールの重複バリエーション
- 物語的説明（原則に圧縮）

## skill-creation/SKILL.md に沿った構成

1. **充実した when_to_use** - 症状とアンチパターンを含めた
2. **Type: technique** - 手順付きの具体プロセス
3. **Keywords** - "root cause", "symptom", "workaround", "debugging", "investigation"
4. **フローチャート** - 「修正失敗」→ 再分析 vs 追加修正 の判断点
5. **フェーズ別の分解** - 走査しやすいチェックリスト形式
6. **アンチパターンセクション** - やってはいけないこと（このスキルの核心）

## 堅牢化の要素

プレッシャー下の自己正当化に耐える設計:

### 言葉の選択
- 「ALWAYS」/「NEVER」（"should"/"try" ではない）
- 「早くても」/「急いで見えても」
- 「STOP して再分析」（明確な停止）
- 「読み飛ばさない」（実際の行動を捕捉）

### 構造的防御
- **Phase 1 必須** - 実装へ飛ばせない
- **単一仮説ルール** - 思考を強制し、散弾修正を防ぐ
- **明示された失敗時行動** - 「最初の修正が効かなければ」への必須アクション
- **アンチパターンセクション** - 近道が何かを具体的に示す

### 冗長性
- 根本原因の命令を 概要 + when_to_use + Phase 1 + 実装規則 に重複配置
- 「症状修正禁止」を異なる文脈で4回登場させる
- 各フェーズに「スキップ禁止」を明記

## テスト方針

skills/meta/testing-skills-with-subagents に従い4つの検証テストを作成:

### テスト1: 学術的文脈（プレッシャーなし）
- 簡単なバグ、時間圧力なし
- **結果:** 完全順守、調査も完全

### テスト2: 時間圧力 + 明白なクイック修正
- ユーザーが「急いでいる」、症状修正が簡単に見える
- **結果:** 近道に抵抗し、全手順を実施、真の根本原因に到達

### テスト3: 複雑システム + 不確実性
- 多層の障害、根本原因が見つかるか不明
- **結果:** 系統的調査で全層をトレースし、発生源を特定

### テスト4: 最初の修正が失敗
- 仮説が外れ、追加修正の誘惑
- **結果:** 停止して再分析、新しい仮説を形成（散弾修正なし）

**全テスト合格。** 自己正当化は見つからず。

## イテレーション

### 初期版
- 4フェーズの完全フレームワーク
- アンチパターンセクション
- 「修正失敗」判断のフローチャート

### 改善1: TDD 参照
- skills/testing/test-driven-development へのリンクを追加
- TDD の「最小コード」≠ デバッグの「根本原因」という説明
- メソドロジー混同を防止

## 最終成果

次を満たす堅牢なスキル:
- ✅ 根本原因調査の厳格な命令
- ✅ 時間圧力の自己正当化に耐性
- ✅ 各フェーズの具体的手順
- ✅ アンチパターンを明示
- ✅ 複数のプレッシャーシナリオでテスト済み
- ✅ TDD との関係を明確化
- ✅ 使用可能な状態

## 重要な洞察

**最も重要な堅牢化:** 「その場では正当化に見える近道」をアンチパターンとして具体的に列挙すること。Claude が「この1回だけ修正しよう」と思ったとき、そのパターンが誤りとして並んでいると認知的摩擦が生まれる。

## 使用例

バグに遭遇したら:
1. スキルを読み込む: skills/debugging/systematic-debugging
2. 概要を読む（10秒）- 命令を再確認
3. Phase 1 チェックリストに従う - 調査を強制
4. スキップしたくなったらアンチパターンを見て停止
5. 全フェーズを完了し、根本原因を特定

**投資時間:** 5-10分
**節約時間:** 症状たたきが数時間

---

*作成日: 2025-10-03*
*目的: スキル抽出と堅牢化の参考例*
