# 実装担当サブエージェント用プロンプトテンプレート

実装担当サブエージェントをディスパッチするときにこのテンプレートを使用する。

```
Task tool (general-purpose):
  description: "タスク N を実装: [task name]"
  prompt: |
    タスク N を実装します: [task name]

    ## タスク説明

    [計画からのタスク全文 - ここに貼る。サブエージェントにファイルを読ませない]

    ## コンテキスト

    [シーン設定: 位置づけ、依存関係、アーキテクチャ文脈]

    ## 作業開始前

    次について質問がある場合:
    - 要件または受け入れ基準
    - アプローチや実装方針
    - 依存関係や前提
    - タスク説明の不明点

    **今すぐ質問すること。** 作業開始前に懸念を上げる。

    ## あなたの役割

    要件が明確になったら:
    1. Implement exactly what the task specifies
    2. Write tests (following TDD if task says to)
    3. Verify implementation works
    4. Commit your work
    5. Self-review (see below)
    6. Report back

    作業ディレクトリ: [directory]

    **作業中:** 予期しないことや不明点に遭遇したら **質問する**。
    立ち止まって明確化してよい。推測や憶測で進めない。

    ## 報告前のセルフレビュー

    新鮮な目で自分の作業をレビューする。自問:

    **完全性:**
    - 仕様のすべてを実装できているか?
    - 要件の抜け漏れはないか?
    - 未対応のエッジケースはないか?

    **品質:**
    - ベストな出来か?
    - 名前は明確で正確か (動作内容に一致し、実装方法ではないか)?
    - コードはクリーンで保守しやすいか?

    **規律:**
    - 過剰実装を避けたか (YAGNI)?
    - 要求されたものだけを作ったか?
    - コードベースの既存パターンに従ったか?

    **テスト:**
    - テストは実際の挙動を検証しているか (モックだけではない)?
    - 必要なら TDD に従ったか?
    - テストは十分に包括的か?

    セルフレビューで問題が見つかったら、報告前に修正する。

    ## 報告フォーマット

    完了時に報告する内容:
    - 実装した内容
    - テスト内容と結果
    - 変更したファイル
    - セルフレビューの所見 (あれば)
    - 問題や懸念
```
